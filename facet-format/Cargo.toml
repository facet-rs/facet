[package]
name = "facet-format"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
repository.workspace = true
description = "Core Serializer/Deserializer traits for facet's next-generation format architecture with JIT compilation support"
keywords = ["serialization", "deserialization", "jit", "facet", "reflection"]
categories = ["encoding", "parsing"]
homepage = "https://facet.rs"

[package.metadata.docs.rs]
rustdoc-args = ["--html-in-header", "arborium-header.html"]

[package.metadata."docs.rs"]
rustdoc-args = ["--html-in-header", "arborium-header.html"]

[dependencies]
facet-core = { path = "../facet-core", version = "0.32.3", features = ["auto-traits", "bytes", "camino", "chrono", "fn-ptr", "indexmap", "jiff02", "net", "nonzero", "num-complex", "ordered-float", "ruint", "simd", "time", "tuples-12", "ulid", "url", "uuid"] }
facet-reflect = { path = "../facet-reflect", version = "0.32.3", features = ["miette"] }
facet-solver = { path = "../facet-solver", version = "0.32.3" }

# JIT compilation (optional)
cranelift = { version = "0.126", optional = true }
cranelift-jit = { version = "0.126", optional = true }
cranelift-module = { version = "0.126", optional = true }
cranelift-native = { version = "0.126", optional = true }
parking_lot = { version = "0.12", optional = true }
museair = { version = "0.4", optional = true }

[dev-dependencies]

[features]
default = []
# JIT-compiled deserialization using Cranelift - works with any FormatParser
jit = ["dep:cranelift", "dep:cranelift-jit", "dep:cranelift-module", "dep:cranelift-native", "dep:parking_lot", "dep:museair"]
# Alias to unblock workspace-level `--features cranelift`
cranelift = ["jit"]
