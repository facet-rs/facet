// Crate Dependency Graph
// Render: dot -Tsvg 00-dependency-graph.dot -o 00-dependency-graph.svg

digraph dependency_graph {
    label="Crate Dependency Graph";
    labelloc="t";
    fontsize=20;
    fontname="Helvetica-Bold";

    node [shape=box, fontname="Helvetica", fontsize=11];
    edge [fontname="Helvetica", fontsize=9];

    rankdir=BT;
    nodesep=0.6;
    ranksep=0.8;

    // Legend
    subgraph cluster_legend {
        label="Legend";
        style=dashed;
        fontname="Helvetica";

        l1 [label="A", shape=box, width=0.5];
        l2 [label="B", shape=box, width=0.5];
        l1 -> l2 [label="A depends on B", color="#228b22", fontcolor="#228b22"];

        l3 [label="C", shape=box, width=0.5];
        l4 [label="D", shape=box, width=0.5];
        l3 -> l4 [label="proc-macro", color="#4169e1", fontcolor="#4169e1", style=dashed];

        l5 [label="E", shape=box, width=0.5];
        l6 [label="F", shape=box, width=0.5];
        l5 -> l6 [label="build-dep", color="#b8860b", fontcolor="#b8860b", style=dotted];
    }

    // Crates
    core [label="facet-core"];
    macros_impl [label="facet-macros-impl\n(impl library)"];
    macros [label="facet-macros\n(proc-macro)"];
    facet [label="facet"];
    kdl [label="facet-kdl"];
    args [label="facet-args"];
    yaml [label="facet-yaml"];
    user [label="user crate", style=dashed];

    // Runtime dependencies (green, solid) - arrow points FROM dependent TO dependency
    facet -> core [label="runtime", color="#228b22", fontcolor="#228b22"];

    // Proc-macro dependencies (blue, dashed)
    macros_impl -> core [label="(types)", color="#4169e1", fontcolor="#4169e1", style=dashed];
    macros -> macros_impl [label="(logic)", color="#4169e1", fontcolor="#4169e1", style=dashed];
    facet -> macros [label="proc-macro", color="#4169e1", fontcolor="#4169e1", style=dashed];

    // Extension crates depend on facet
    kdl -> facet [label="runtime", color="#228b22", fontcolor="#228b22"];
    args -> facet [label="runtime", color="#228b22", fontcolor="#228b22"];
    yaml -> facet [label="runtime", color="#228b22", fontcolor="#228b22"];

    // User depends on facet + extensions
    user -> facet [label="runtime", color="#228b22", fontcolor="#228b22"];
    user -> kdl [label="runtime", color="#228b22", fontcolor="#228b22"];
    user -> args [label="runtime", color="#228b22", fontcolor="#228b22"];
}
