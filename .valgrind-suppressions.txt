# Valgrind suppressions for facet
# Use with: valgrind --suppressions=.valgrind-suppressions.txt

# Rust std library atomics - known to trigger false positives
{
   rust_std_atomic_uninitialized
   Memcheck:Cond
   ...
   obj:*/libstd-*.so
   fun:std::sync::*
}

{
   rust_std_atomic_value
   Memcheck:Value*
   ...
   obj:*/libstd-*.so
   fun:std::sync::*
}

# Cranelift JIT - uninitialized values in code generation
{
   cranelift_jit_codegen
   Memcheck:Value*
   ...
   fun:cranelift*
}

{
   cranelift_jit_cond
   Memcheck:Cond
   ...
   fun:cranelift*
}

# macOS system libraries
{
   macos_dyld
   Memcheck:Leak
   match-leak-kinds: reachable
   ...
   fun:dyld*
}

{
   macos_libsystem
   Memcheck:Leak
   match-leak-kinds: reachable
   ...
   obj:*/libsystem_*.dylib
}
