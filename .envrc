source_up || true

# Define a function to run a command within a GitHub Actions group
cmd_group() {
    local cmd="$*"

    # Start group
    if [[ -n "${GITHUB_ACTIONS:-}" ]]; then
        echo "::group::$cmd"
    fi
    echo -e "\033[1;33mðŸ§ª $cmd\033[0m"

    # Run the command
    eval "$cmd"

    # End group
    if [[ -n "${GITHUB_ACTIONS:-}" ]]; then
        echo "::endgroup::"
    fi
}

export MIRIFLAGS="-Zmiri-env-forward=RUST_BACKTRACE -Zmiri-env-forward=NEXTEST"
export RUST_BACKTRACE=1

# Syntax highlighting for rustdoc (JSON, YAML, TOML, etc.)
# Assets served from https://facet.rs/hljs/
export RUSTDOCFLAGS="--html-in-header $PWD/docs/meta/highlight.html"
